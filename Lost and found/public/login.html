<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Report Lost Item</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <nav>
    <div style="display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; padding: 10px 20px; background-color: #006400;">
      
      <div style="display: flex; align-items: center; flex: 1 1 200px; min-width: 200px;">
        <img src="DLSL_Official_logo.png" alt="DLSL Logo" style="height: 50px; margin-right: 15px;">
        <h2 style="color: white; margin: 0;">Welcome to DLSL Lost & Found Tracker</h2>
      </div>
  
    </div>
  </nav>
<!--log in section, modify it to your desired input and style
  -->
<section style="display: flex; align-items: center; flex-direction: column;">
  <img src="DLSL_Official_logo.png" alt="DLSL Logo" style="height: 250px;">
  <h2>DLSL Lost & Found Tracker</h2>
  <form onsubmit="submitLogin(event)" style="display: flex; flex-wrap: wrap; align-items: center; flex-direction: column; justify-content: center; font-weight: bold;">
    
    <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; ">
    <label>UserName</label>
    <input style="width: 60%; border-width: thick;" id="username" required />
    </div>

    <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between;">
    <label>Password</label>
    <input  style="width: 60%; border-width: thick;" type="password" id="password" required />
    </div>
     
    <div style="display: flex; flex-direction: row; justify-content: space-between; width: 350px; margin-top: 30px;">
    <button type="submit" style="font-weight: bold; width: 30%;">Log In</button>
    <button style="font-weight: bold; width: 30%;" onclick="window.location.href='sign_up.html'">Sign Up</button>
    </div>
  </form>
</section>

<script>
function submitLogin(event) {
  event.preventDefault();

  const credentials = {
    username: document.getElementById('username').value,
    password: document.getElementById('password').value
  };

  fetch('/api/login', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(credentials)
  })
    .then(res => {
      if (!res.ok) throw new Error('Login failed');
      return res.json();
    })
    .then(data => {
      alert(data.message);
      window.location.href = '/index.html';
    })
    .catch(err => {
      alert('Username or Password Incorrect!');
      console.error(err);
    });
}
</script>
</body>
</html>
